{% extends "base.html" %}

{%- block header %}
{{ super() }}
{% endblock %}

{%- block center %}
{{ super() }}
<div class=edit  ng-show='editing'>
	<div class=top>
		<div class=center>
			<button class="btn btn-primary"  ng-disabled="!modified" 
				ng-click="save();" >Save</button>
			<button class="btn btn-primary">Versioning</button>	
		</div>
		<div class=right>
			<button type="button" class="close" aria-label="Close edit panel" ng-click="toggleEdit()">
		  		<span aria-hidden="true">&times;</span>
			</button>
		</div>
	</div>
	<div class=center>
		<iframe id='edit_iframe' class='center'></iframe>
	</div>
</div>
<div class=view>
	<div class=top>
		<ul class="nav nav-tabs">
	  		<li ng-class="{'active' : view=='html'}">
	  			<a href ng-click='setView("html")'>
	  				{{ '{{' }} 'Html' + (view=='html' && needsRefresh ? ' (Click to refresh)' : '') {{ '}}' }}
	  			</a>
	  		</li>
	  		<li ng-class="{'active' : view=='pdf'}">
	  			<a href ng-click='setView("pdf")'>
	  				{{ '{{' }} 'Pdf' + (view=='pdf' && needsRefresh ? ' (Click to refresh)' : '') {{ '}}' }}
	  			</a>
	  		</li>
	  		<li ng-show="!editing">  <!-- ng-class="{'active' : editing}"> -->
	  			<a href ng-click="toggleEdit()">Edit source</a>
	  		</li>
		</ul>	
	</div>
	<div class=center>
		<div ng-show='loading' id='loading_div'>
			<div class=waitbar>
				<div></div>
			</div>
			<div class=msg>Building report (it might take few minutes)</div>
		</div>
		<iframe ng-show="view='html'" id='viewpdf_iframe'></iframe>
		<iframe ng-show="view='pdf'" id='viewhtml_iframe'></iframe>
	</div>
</div>



{% endblock %}